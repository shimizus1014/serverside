セッションスコープのしくみ

  セッションスコープの正体であるHttpSessionインスタンスは、
  ユーザー（ブラウザ）ごとに作成されます。
  セッションスコープを作成すると、セッションIDが発行されます。
  IDは、ブラウザ、アプリケーションサーバのどちらにも作成され、
  ブラウザは、以降リクエストのたびにこのセッションIDを送信
  します。アプリケーションサーバはこれを読み取り、専用の
  セッションスコープを見つけ、値を取り出しています。


セッションIDとクッキー

  クッキー（Cookie）とは、Webサーバブラウザにデータを保存、
  送信されるしくみです。
  サーバがレスポンス時に、クッキーと呼ばれるデータを含めると、
  レスポンスを受信したブラウザはクッキーをコンピュータに保存
  します。これにより、以降リクエスト時に、クッキーを付随した
  情報をアプリケーションサーバに送信します。
  このようなしくみで、Webサーバとアプリケーションサーバで
  セッションIDのやり取りをしています。
  
  クッキーの有効期限
    クッキーには有効期限を設定できます。
    有効期限内であれば、何度ブラウザを閉じてもクッキーは
    残ります。別ブラウザから開いても、同じコンピュータ内
    ならば、クッキーは残りつづけます。
    有効期限を設定しない場合は、Apache Tomcatの初期設定
    では、ブラウザが閉じられるまでとなっています。
    ブラウザが閉じられずに、別のブラウザを開いた場合、
    前のブラウザのクッキーを引き継ぐので、新しいブラウザ
    で実行確認したい場合は、一旦すべてのブラウザを閉じて
    から実行しましょう。

セッションスコープの注意点

  セッションタイムアウト
    Apache Tomcatの初期設定では、30分利用されていない
    HttpSessionインスタンスは破棄される。
    
  インスタンスの削除
    不要となったインスタンスを残していると不具合の原因
    になります。不要になったら開発者自身がインスタンスを
    管理するようにしましょう。
      remobeAttribute()を使用

  セッションスコープの破棄
    インスタンスを削除することも大事ですが、そもそも
    使わなくなったセッションスコープも削除するということ
    もメモリ管理に大切です。
    セッションスコープ破棄の例文
      session.invalidate();
      セッション自体が削除され、インスタンスもすべて消滅